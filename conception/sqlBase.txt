DROP TABLE IF EXISTS Roles;
CREATE TABLE Roles (idRole INT(9) AUTO_INCREMENT NOT NULL, NomRole VARCHAR(250), PRIMARY KEY (idRole)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Utilisateurs ;
CREATE TABLE Utilisateurs (idUtilisateur INT(9) AUTO_INCREMENT NOT NULL, NomUtilisateur VARCHAR(255), PrenomUtilisateur VARCHAR(255), MotDePasse VARCHAR(60), DateEntreeFormation DATE, TitreFormation VARCHAR(255),
LieuFormation VARCHAR(255), idRole INT(9), PRIMARY KEY (idUtilisateur)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Reponses ;
CREATE TABLE Reponses (idReponse INT(9) AUTO_INCREMENT NOT NULL, IntituleReponse VARCHAR(255), idQuestion INT(9), PRIMARY KEY (idReponse)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Types ;
CREATE TABLE Types (idType INT(9) AUTO_INCREMENT NOT NULL, NomType VARCHAR(255), PRIMARY KEY (idType)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Notes ;
CREATE TABLE Notes (idNote INT(9) AUTO_INCREMENT NOT NULL, PRIMARY KEY (idNote)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Questions ;
CREATE TABLE Questions (idQuestion INT(9) AUTO_INCREMENT NOT NULL, IntituleQuestion VARCHAR(255), idReponse INT(9), PRIMARY KEY (idQuestion)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Reponds;
CREATE TABLE Reponds (idUtilisateur INT(9) AUTO_INCREMENT NOT NULL, idReponse INT(9) NOT NULL, PRIMARY KEY (idUtilisateur, idReponse)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Contient ;
CREATE TABLE Contient (idReponse INT(9) AUTO_INCREMENT NOT NULL, idType INT(9) NOT NULL, PRIMARY KEY (idReponse, idType)) ENGINE=InnoDB;

DROP TABLE IF EXISTS aPour ;
CREATE TABLE aPour (idReponse INT AUTO_INCREMENT NOT NULL, idNote INT NOT NULL, PRIMARY KEY (idReponse, idNote)) ENGINE=InnoDB;

ALTER TABLE Utilisateurs ADD CONSTRAINT FK_Utilisateurs_idRole FOREIGN KEY (idRole) REFERENCES Roles (idRole);
ALTER TABLE Reponses ADD CONSTRAINT FK_Reponses_idQuestion FOREIGN KEY (idQuestion) REFERENCES Questions (idQuestion);
ALTER TABLE Questions ADD CONSTRAINT FK_Questions_idReponse FOREIGN KEY (idReponse) REFERENCES Reponses (idReponse);
ALTER TABLE Reponds ADD CONSTRAINT FK_Reponds_idUtilisateur FOREIGN KEY (idUtilisateur) REFERENCES Utilisateurs (idUtilisateur);
ALTER TABLE Reponds ADD CONSTRAINT FK_Reponds_idReponse FOREIGN KEY (idReponse) REFERENCES Reponses (idReponse);
ALTER TABLE Contient ADD CONSTRAINT FK_Contient_idReponse FOREIGN KEY (idReponse) REFERENCES Reponses (idReponse);
ALTER TABLE Contient ADD CONSTRAINT FK_Contient_idType FOREIGN KEY (idType) REFERENCES Types (idType);
ALTER TABLE aPour ADD CONSTRAINT FK_aPour_idReponse FOREIGN KEY (idReponse) REFERENCES Reponses (idReponse);
ALTER TABLE aPour ADD CONSTRAINT FK_aPour_idNote FOREIGN KEY (idNote) REFERENCES Notes (idNote);